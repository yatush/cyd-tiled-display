esp32:
  board: esp32dev
  framework:
    type: esp-idf

logger:

wifi:
  power_save_mode: NONE
  fast_connect : true

spi:
  id: spi_bus1
  clk_pin: GPIO14
  mosi_pin: GPIO13
  miso_pin: GPIO12

output: 
  - platform: ledc
    pin: GPIO27
    id: backlight_pwm
  - platform: ledc
    id: output_red
    pin: GPIO4
    inverted: true
  - platform: ledc
    id: output_green
    pin: GPIO16
    inverted: true
  - platform: ledc
    id: output_blue
    pin: GPIO17
    inverted: true

i2c:
  id: i2c_bus1
  sda: GPIO33
  scl: GPIO32

sensor:
  - platform: adc
    pin: GPIO34
    id: board_ldr
    name: "board_ldr"
    update_interval: 1000ms
    entity_category: "diagnostic"
    accuracy_decimals: 3
    internal: true
    filters:
      - delta: 0.01

uart:
  tx_pin: GPIO22
  rx_pin:
    number: GPIO21
    mode:
      input: true
      pullup: true  # Prevents floating RX from generating spurious ld2410 frames when no radar is connected
  baud_rate: 256000
  parity: NONE
  stop_bits: 1

globals:
  - id: render_diffs
    type: bool
    initial_value: "false"
  - id: width
    type: int
    initial_value: "480"
  - id: height
    type: int
    initial_value: "320"
  - id: tile_border_width
    type: int
    initial_value: "2"

font:
  # Master glyph list - define ALL Material Icons glyphs once
  - file: "gfonts://Material+Symbols+Outlined"
    id: tiny
    size: 32
    glyphs: !include mdi_glyphs.yaml

  - file: "gfonts://Material+Symbols+Outlined"
    id: small
    size: 60
    glyphs: !include mdi_glyphs.yaml

  - file: "gfonts://Material+Symbols+Outlined"
    id: medium
    size: 80
    glyphs: !include mdi_glyphs.yaml

  - file: "gfonts://Material+Symbols+Outlined"
    id: big
    size: 100
    glyphs: !include mdi_glyphs.yaml

  - file: "gfonts://Roboto"
    id: text_regular
    size: 30

  - file: "gfonts://Roboto@900"
    id: text_bold
    size: 30

  - file: "gfonts://Roboto@900"
    id: text_big_bold
    size: 40

  - file: "gfonts://Roboto@900"
    id: text_small
    size: 18
    glyphs: !include roboto_glyphs.yaml

display:
  - platform: mipi_spi
    id: disp
    model: ST7796
    spi_id: spi_bus1
    dc_pin: GPIO2
    cs_pin: GPIO15
    invert_colors: False
    color_order: BGR
    update_interval: 10s
    color_depth: 8BIT
    buffer_size : 70%
    dimensions:
      height: 320
      width: 480
    data_rate: 40000000.0
    rotation: 90


touchscreen:
  - platform: gt911
    address: 0x5D
    id: touchscreen_id
    display: disp
    i2c_id: i2c_bus1
    transform: 
      swap_xy: True
      mirror_x: False
      mirror_y: True
    on_touch:
      then:
        - script.execute:
            id: _handle_touch
            x: !lambda return touch.x;
            y: !lambda return touch.y;
            x_raw: !lambda return touch.x_raw;
            y_raw: !lambda return touch.y_raw;